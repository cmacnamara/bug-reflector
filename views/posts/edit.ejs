<%- include('../partials/html-head') %>
<%- include('../partials/nav') %>

<section class="main-content">
  <div class="content-card">
    <form 
      id="new-post-form" 
      action="/posts/<%= post._id %>?_method=PUT" 
      method="POST">
      <h2 id="create-post-title">Edit Post</h2>
      <div class="form-fields">
        <label class="label-spacer" for="summary">Summary</label>
        <input id="summary-input" type="text" name="summary" value="<%= post.summary %>">
      </div>
      <div class="form-fields">
        <label class="label-spacer" for="mainContent">Description</label>
        <textarea name="mainContent" class="text-area form-text-area" cols="30" rows="5"><%= post.mainContent %></textarea>
      </div>
      <label class="form-fields">Did you fix your bug?: <input type="checkbox" name="resolved" <%= post.resolved ? 'checked' : ''%>></label> 
      <div class="form-fields">
        <label class="label-spacer" for="reflection">Reflection</label>
        <textarea name="reflection" class="text-area form-text-area" cols="30" rows="5"><%= post.reflection %></textarea>
      </div>
      <fieldset id="tech-list">      
        <legend>Related Technologies</legend>
        <% technologies.forEach(technology => { %>
          <input type="checkbox" name="technologies" value="<%= technology._id %>" <%= post.technologies.some(tech => tech.name === technology.name) ? 'checked' : ''%>> <%= technology.name %><br>
        <% }) %>      
    </fieldset> 
      <button id="save-btn" class="nav-btn" type="submit">Save Post</button>
    </form>
  </div>
</section>

<%- include('../partials/footer') %>